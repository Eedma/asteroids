!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var s=i(1),o=void 0,n=void 0,r=window.innerWidth,a=window.innerHeight,h=void 0,l=void 0,d=void 0,u=void 0;function c(){l=new s.Game,o=document.getElementById("canvas"),n=o.getContext("2d"),o.width=r,o.height=a,n.fillStyle="black",n.fillRect(0,0,o.width,o.height),d=new s.Ship;for(var t=0;t<l.exp+8;t++)l.asteroids.push(new s.Asteroid);document.body.addEventListener("keydown",f),document.body.addEventListener("keyup",v),u=null==localStorage.getItem("HighScore")?0:localStorage.getItem("HighScore"),p()}function f(t){l.keys[t.keyCode]=!0}function v(t){l.keys[t.keyCode]=!1,32===t.keyCode&&l.bullets.push(new s.Bullet(d))}function y(t,e,i,s,o,n){var r,a;return r=t-s,a=e-o,i+n>Math.sqrt(r*r+a*a)}function p(){if(d.movingForward=l.keys[87],l.keys[68]&&d.Rotate(1),l.keys[65]&&d.Rotate(-1),n.clearRect(0,0,r,a),n.fillStyle="white",n.font="21px monospace",n.fillText("score : "+l.score.toString(),20,35),0===l.asteroids.length){l.exp+=1;for(var t=0;t<l.exp+8;t++){var e=new s.Asteroid;e.speed=l.exp,l.asteroids.push(e)}}if(function(){var t=1350,e=[[9,9],[-9,9]];n.strokeStyle="white";for(var i=0;i<l.lives;i++){n.beginPath(),n.moveTo(t,10);for(var s=0;s<e.length;s++)n.lineTo(t+e[s][0],10+e[s][1]);n.closePath(),n.stroke(),t-=30}}(),0!==l.asteroids.length)for(var i=0;i<l.asteroids.length;i++)y(d.x,d.y,11,l.asteroids[i].x,l.asteroids[i].y,l.asteroids[i].collisionRadius)&&(d.x=r/2,d.y=a/2,d.velX=0,d.velY=0,l.lives-=1);if(0!==l.asteroids.length&&0!=l.bullets.length)t:for(var o=0;o<l.asteroids.length;o++)for(var c=0;c<l.bullets.length;c++)if(y(l.bullets[c].x,l.bullets[c].y,3,l.asteroids[o].x,l.asteroids[o].y,l.asteroids[o].collisionRadius)){1===l.asteroids[o].level?(l.asteroids.push(new s.Asteroid(l.asteroids[o].x-5,l.asteroids[o].y-5,25,2,22,l.exp-1)),l.asteroids.push(new s.Asteroid(l.asteroids[o].x+5,l.asteroids[o].y+5,25,2,22,l.exp-1))):2===l.asteroids[o].level&&(l.asteroids.push(new s.Asteroid(l.asteroids[o].x-5,l.asteroids[o].y-5,15,3,12,l.exp-.5)),l.asteroids.push(new s.Asteroid(l.asteroids[o].x+5,l.asteroids[o].y+5,15,3,12,l.exp-.5))),l.asteroids.splice(o,1),l.bullets.splice(c,1),l.score+=20;break t}if(d.visible&&(d.Update(),d.Draw()),0!==l.bullets.length)for(var f=0;f<l.bullets.length;f++)l.bullets[f].Update(),l.bullets[f].Draw();if(0!==l.asteroids.length)for(var v=0;v<l.asteroids.length;v++)l.asteroids[v].Update(),l.asteroids[v].Draw(v);u=Math.max(l.score,u),localStorage.setItem("HighScore",u),n.font="21px monospace",n.fillText("high score : "+u.toString(),20,70),n.fillText("level : "+l.exp.toString(),20,105),h=requestAnimationFrame(p),l.lives<=0&&g()}document.addEventListener("DOMContentLoaded",c),document.addEventListener("keydown",(function(t){l.lives<=0&&32===t.keyCode&&c()}));var g=function(){if(document.body.removeEventListener("keydown",f),document.body.removeEventListener("keyup",v),d.visible=!1,console.log(d),n.fillStyle="white",n.font="50px monospace",n.textAlign="center",n.fillText("GAME OVER",o.width/2,a/2),n.textAlign="center",n.fillText("press spacebar to play again",o.width/2,a/1.5),l.lives<=0)return cancelAnimationFrame(h)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=window.innerWidth,r=window.innerHeight,a=document.getElementById("canvas"),h=a.getContext("2d");e.Game=function t(){o(this,t),this.keys=[],this.bullets=[],this.asteroids=[],this.score=0,this.lives=3,this.exp=1},e.Ship=function(){function t(){o(this,t),this.visible=!0,this.x=n/2,this.y=r/2,this.movingForward=!1,this.speed=.1,this.velX=0,this.velY=0,this.rotateSpeed=.001,this.radius=15,this.angle=0,this.strokeColor="white",this.noseX=n/2+15,this.noseY=r/2}return s(t,[{key:"Rotate",value:function(t){this.angle+=this.rotateSpeed*t}},{key:"Update",value:function(){var t=this.angle/Math.PI*180;this.movingForward&&(this.velX+=Math.cos(t)*this.speed,this.velY+=Math.sin(t)*this.speed),this.x<this.radius&&(this.x=a.width),this.x>a.width&&(this.x=this.radius),this.y<this.radius&&(this.y=a.height),this.y>a.height&&(this.y=this.radius),this.velX*=.99,this.velY*=.99,this.x-=this.velX,this.y-=this.velY}},{key:"Draw",value:function(){h.strokeStyle=this.strokeColor,h.beginPath();var t=2*Math.PI/3,e=this.angle/Math.PI*180;this.noseX=this.x-this.radius*Math.cos(e),this.noseY=this.y-this.radius*Math.sin(e);for(var i=0;i<3;i++)h.lineTo(this.x-this.radius*Math.cos(t*i+e),this.y-this.radius*Math.sin(t*i+e));h.closePath(),h.stroke()}}]),t}(),e.Bullet=function(){function t(e){o(this,t),this.visible=!0,this.x=e.noseX,this.y=e.noseY,this.angle=e.angle,this.height=4,this.width=4,this.speed=7,this.velX=0,this.velY=0}return s(t,[{key:"Update",value:function(){var t=this.angle/Math.PI*180;this.x-=Math.cos(t)*this.speed,this.y-=Math.sin(t)*this.speed}},{key:"Draw",value:function(){h.fillStyle="white",h.fillRect(this.x,this.y,this.width,this.height)}}]),t}(),e.Asteroid=function(){function t(e,i,s,a,h,l){o(this,t),this.visible=!0,this.x=e||Math.floor(Math.random()*n),this.y=i||Math.floor(Math.random()*r),this.speed=1,this.radius=s||50,this.angle=Math.floor(359*Math.random()),this.strokeColor="white",this.collisionRadius=h||46,this.level=a||1}return s(t,[{key:"Update",value:function(){var t=this.angle/Math.PI*180;this.x+=Math.cos(t)*this.speed,this.y+=Math.sin(t)*this.speed,this.x<this.radius&&(this.x=a.width),this.x>a.width&&(this.x=this.radius),this.y<this.radius&&(this.y=a.height),this.y>a.height&&(this.y=this.radius)}},{key:"Draw",value:function(){h.beginPath();for(var t=2*Math.PI/6,e=this.angle/Math.PI*180,i=0;i<6;i++)h.lineTo(this.x-this.radius*Math.cos(t*i+e),this.y-this.radius*Math.sin(t*i+e));h.closePath(),h.stroke()}}]),t}()}]);